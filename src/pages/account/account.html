<ion-header>
  <main-toolbar></main-toolbar>
</ion-header>

  <ion-content padding class="outer-content">
    <ion-list class="list-form" *ngIf="onLoad">
      <form [formGroup]='editForm'>
        <ion-item *ngIf='!!(userService.errorMessages[edit])' class='alertDanger'>
          <span>{{userService.errorMessages[edit]}}</span>
        </ion-item>

        <ion-item>
          <ion-label floating>E-mail</ion-label>
          <ion-input type="text" formControlName="email"></ion-input>
        </ion-item>
        <ion-item class='alertDanger' *ngIf="formErrors.email">
          <span>{{formErrors.email}}</span>
        </ion-item>


        <ion-item>
          <ion-label floating>Password</ion-label>
          <ion-input type="password"  formControlName="password"></ion-input>
        </ion-item>
        <ion-item class='alertDanger' *ngIf="formErrors.password">
          <span>{{formErrors.password}}</span>
        </ion-item>

        <ion-item>
          <ion-label floating>Name</ion-label>
          <ion-input type="text" formControlName="name"></ion-input>
        </ion-item>
        <ion-item class='alertDanger' *ngIf="formErrors.name">
          <span>{{formErrors.name}}</span>
        </ion-item>

        <ion-item>
          <ion-label floating>App key</ion-label>
          <ion-input type="text" formControlName="appKey"></ion-input>
        </ion-item>
        <ion-item class='alertDanger' *ngIf="formErrors.appKey">
          <span>{{formErrors.appKey}}</span>
        </ion-item>

        <ion-grid class="f-top20">
          <ion-row>
           <ion-col col-7>
             <ion-label class="f-label-drop-field">Currency</ion-label>
           </ion-col>
            <ion-col col-4>
              <dropdown-list [reference]="currentCurrency"
                             [store]="currencies"
                             [map]="{valueName:'id',displayName:'shortName'}"
                             [afterUpdate]="currencyUpdate">
              </dropdown-list>
            </ion-col>
          </ion-row>
        </ion-grid>

        <ion-grid class="f-top20">
          <ion-row>
            <ion-col col-7>
              <ion-label class="f-label-drop-field">Language</ion-label>
            </ion-col>
            <ion-col col-4>
              <dropdown-list [reference]="currentLang"
                             [store]="langs"
                             [map]="{valueName:'id',displayName:'name'}"
                             [afterUpdate]="langUpdate">
              </dropdown-list>
            </ion-col>
          </ion-row>
        </ion-grid>

        <button style="background: #ffbc2e" ion-button block color="fox" (click)="edit()">Apply</button>
      </form>

    </ion-list>

    <div *ngIf="onLoad" class="align-bottom" padding text-center>
      <span class="bold" (click)="logout()">Logoff</span>
    </div>
  </ion-content>
